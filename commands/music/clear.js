const { EmbedBuilder } = require('discord.js'); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è embed-—Å–æ–æ–±—â–µ–Ω–∏–π
const { useQueue } = require('discord-player'); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –æ—á–µ—Ä–µ–¥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
const { Translate } = require('../../process_tools'); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤

module.exports = {
    name: 'clear', // –ò–º—è –∫–æ–º–∞–Ω–¥—ã
    description: ('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –º—É–∑—ã–∫—É –≤ –æ—á–µ—Ä–µ–¥–∏'), // –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
    voiceChannel: true, // –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º –∫–∞–Ω–∞–ª–µ

    async execute({ inter }) {
        const queue = useQueue(inter.guild); // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –æ—á–µ—Ä–µ–¥—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ª–∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—É–∑—ã–∫–∞
        if (!queue?.isPlaying()) 
            return inter.editReply({ content: await Translate(`–°–µ–π—á–∞—Å –º—É–∑—ã–∫–∞ –Ω–µ –∏–≥—Ä–∞–µ—Ç <${inter.member}>... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ —Ç—Ä–µ–∫–∏ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ
        if (!queue.tracks.toArray()[1]) 
            return inter.editReply({ content: await Translate(`–ù–µ—Ç –º—É–∑—ã–∫–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–π <${inter.member}>... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });

        // –û—á–∏—â–∞–µ–º –æ—á–µ—Ä–µ–¥—å
        queue.tracks.clear();

        // –°–æ–∑–¥–∞–µ–º embed-—Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –æ—á–µ—Ä–µ–¥—å –±—ã–ª–∞ –æ—á–∏—â–µ–Ω–∞
        const clearEmbed = new EmbedBuilder()
            .setAuthor({ name: await Translate(`–û—á–µ—Ä–µ–¥—å —Ç–æ–ª—å–∫–æ —á—Ç–æ –±—ã–ª–∞ –æ—á–∏—â–µ–Ω–∞ <üóëÔ∏è>`) }) // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è
            .setColor('#2f3136'); // –¶–≤–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º embed-—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É
        inter.editReply({ embeds: [clearEmbed] });
    }
}
