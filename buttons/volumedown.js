const { Translate } = require('../process_tools'); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤

const maxVol = client.config.opt.maxVol; // –ü–æ–ª—É—á–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

module.exports = async ({ inter, queue }) => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ª–∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—É–∑—ã–∫–∞
    if (!queue?.isPlaying()) 
        return inter.editReply({ content: await Translate(`–°–µ–π—á–∞—Å –º—É–∑—ã–∫–∞ –Ω–µ –∏–≥—Ä–∞–µ—Ç... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });

    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –Ω–æ–≤—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å, —É–º–µ–Ω—å—à–∞—è —Ç–µ–∫—É—â—É—é –Ω–∞ 5
    const vol = Math.floor(queue.node.volume - 5);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∏–∂–µ –ª–∏ –Ω–æ–≤–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω—É–ª—è
    if (vol < 0) 
        return inter.editReply({ content: await Translate(`–Ø –Ω–µ –º–æ–≥—É —É–º–µ–Ω—å—à–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∏–∂–µ –Ω—É–ª—è <${inter.member}>... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Ä–∞–≤–Ω–∞ –ª–∏ –Ω–æ–≤–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å —Ç–µ–∫—É—â–µ–π
    if (queue.node.volume === vol) 
        return inter.editReply({ content: await Translate(`–ì—Ä–æ–º–∫–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, —É–∂–µ —Ç–µ–∫—É—â–∞—è <${inter.member}>... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
    const success = queue.node.setVolume(vol);

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —É—Å–ø–µ—à–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∞ –≥—Ä–æ–º–∫–æ—Å—Ç—å
    return inter.editReply({ content: success ? await Translate(`–ì—Ä–æ–º–∫–æ—Å—Ç—å –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ <${vol}/${maxVol}% üîä>`) : await Translate(`–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ <${inter.member}>... –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞? <‚ùå>`) });
}
